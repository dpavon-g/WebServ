File content:
server {
	server_names youpi;
	server_names pepe.com www.fulano.com;
	listen 0.0.0.0:8000;

	root ./YoupiBanane;
	index index.html;

	allowed_methods GET;
	location /put_test {
		allowed_methods DELETE;
		root ./YoupiBanane/put_here;
	}

	location /post_body {
		allowed_methods POST;
		max_body_size 100;
	}

	location /directory {
		allowed_methods GET;
		root YoupiBanane/;
		index youpi.bad_extension;

		#cgi_pass .bla test_mac/macos_cgi_tester;
		cgi_pass .bla ubuntu_cgi_tester;
	}

	location /pepe {
		allowed_methods GET;
		root YoupiBanane/;
		redirect https://example.com;
	}
}

server {
	server_names youpi;
	listen 0.0.0.0:8001;

	root ./YoupiBanane;
	index index.html;

	allowed_methods GET;

	location /put_test {
		allowed_methods POST;
		root ./YoupiBanane/put_here;
	}

	location /post_body {
		allowed_methods POST;
		max_body_size 100;
	}

	location /directory {
		allowed_methods GET;
		root YoupiBanane/;
		index youpi.bad_extension;
		cgi_pass .bla test_mac/macos_cgi_tester;
	}
}

server {
	server_names youpi;
	listen 0.0.0.0:8002;

	root ./YoupiBanane;
	index index.html;

	allowed_methods GET;

	location /put_test {
		allowed_methods POST;
		root ./YoupiBanane/put_here;
	}

	location /post_body {
		allowed_methods POST;
		max_body_size 100;
	}

	location /directory {
		allowed_methods GET POST;
		root YoupiBanane/;
		index youpi.bad_extension;
		cgi_pass .bla test_mac/macos_cgi_tester;
	}
}
Ignoring comment#cgi_pass .bla test_mac/macos_cgi_tester;
Token(IDENTIFIER, "server", 0)
Token(OPERATOR, "{", 0)
Token(IDENTIFIER, "server_names", 1)
Token(STRING_LITERAL, "youpi", 1)
Token(OPERATOR, ";", 1)
Token(IDENTIFIER, "server_names", 2)
Token(STRING_LITERAL, "pepe.com", 2)
Token(IDENTIFIER, "www.fulano.com", 2)
Token(OPERATOR, ";", 2)
Token(IDENTIFIER, "listen", 3)
Token(STRING_LITERAL, "0.0.0.0:8000", 3)
Token(OPERATOR, ";", 3)
Token(IDENTIFIER, "root", 5)
Token(STRING_LITERAL, "./YoupiBanane", 5)
Token(OPERATOR, ";", 5)
Token(IDENTIFIER, "index", 6)
Token(STRING_LITERAL, "index.html", 6)
Token(OPERATOR, ";", 6)
Token(IDENTIFIER, "allowed_methods", 8)
Token(STRING_LITERAL, "GET", 8)
Token(OPERATOR, ";", 8)
Token(IDENTIFIER, "location", 9)
Token(STRING_LITERAL, "/put_test", 9)
Token(OPERATOR, "{", 9)
Token(IDENTIFIER, "allowed_methods", 10)
Token(STRING_LITERAL, "DELETE", 10)
Token(OPERATOR, ";", 10)
Token(IDENTIFIER, "root", 11)
Token(STRING_LITERAL, "./YoupiBanane/put_here", 11)
Token(OPERATOR, ";", 11)
Token(OPERATOR, "}", 12)
Token(IDENTIFIER, "location", 14)
Token(STRING_LITERAL, "/post_body", 14)
Token(OPERATOR, "{", 14)
Token(IDENTIFIER, "allowed_methods", 15)
Token(STRING_LITERAL, "POST", 15)
Token(OPERATOR, ";", 15)
Token(IDENTIFIER, "max_body_size", 16)
Token(INTEGER_LITERAL, "100", 16)
Token(OPERATOR, ";", 16)
Token(OPERATOR, "}", 17)
Token(IDENTIFIER, "location", 19)
Token(STRING_LITERAL, "/directory", 19)
Token(OPERATOR, "{", 19)
Token(IDENTIFIER, "allowed_methods", 20)
Token(STRING_LITERAL, "GET", 20)
Token(OPERATOR, ";", 20)
Token(IDENTIFIER, "root", 21)
Token(STRING_LITERAL, "YoupiBanane/", 21)
Token(OPERATOR, ";", 21)
Token(IDENTIFIER, "index", 22)
Token(STRING_LITERAL, "youpi.bad_extension", 22)
Token(OPERATOR, ";", 22)
Token(IDENTIFIER, "cgi_pass", 25)
Token(STRING_LITERAL, ".bla", 25)
Token(IDENTIFIER, "ubuntu_cgi_tester", 25)
Token(OPERATOR, ";", 25)
Token(OPERATOR, "}", 26)
Token(IDENTIFIER, "location", 28)
Token(STRING_LITERAL, "/pepe", 28)
Token(OPERATOR, "{", 28)
Token(IDENTIFIER, "allowed_methods", 29)
Token(STRING_LITERAL, "GET", 29)
Token(OPERATOR, ";", 29)
Token(IDENTIFIER, "root", 30)
Token(STRING_LITERAL, "YoupiBanane/", 30)
Token(OPERATOR, ";", 30)
Token(IDENTIFIER, "redirect", 31)
Token(STRING_LITERAL, "https://example.com", 31)
Token(OPERATOR, ";", 31)
Token(OPERATOR, "}", 32)
Token(OPERATOR, "}", 33)
Token(IDENTIFIER, "server", 35)
Token(OPERATOR, "{", 35)
Token(IDENTIFIER, "server_names", 36)
Token(STRING_LITERAL, "youpi", 36)
Token(OPERATOR, ";", 36)
Token(IDENTIFIER, "listen", 37)
Token(STRING_LITERAL, "0.0.0.0:8001", 37)
Token(OPERATOR, ";", 37)
Token(IDENTIFIER, "root", 39)
Token(STRING_LITERAL, "./YoupiBanane", 39)
Token(OPERATOR, ";", 39)
Token(IDENTIFIER, "index", 40)
Token(STRING_LITERAL, "index.html", 40)
Token(OPERATOR, ";", 40)
Token(IDENTIFIER, "allowed_methods", 42)
Token(STRING_LITERAL, "GET", 42)
Token(OPERATOR, ";", 42)
Token(IDENTIFIER, "location", 44)
Token(STRING_LITERAL, "/put_test", 44)
Token(OPERATOR, "{", 44)
Token(IDENTIFIER, "allowed_methods", 45)
Token(STRING_LITERAL, "POST", 45)
Token(OPERATOR, ";", 45)
Token(IDENTIFIER, "root", 46)
Token(STRING_LITERAL, "./YoupiBanane/put_here", 46)
Token(OPERATOR, ";", 46)
Token(OPERATOR, "}", 47)
Token(IDENTIFIER, "location", 49)
Token(STRING_LITERAL, "/post_body", 49)
Token(OPERATOR, "{", 49)
Token(IDENTIFIER, "allowed_methods", 50)
Token(STRING_LITERAL, "POST", 50)
Token(OPERATOR, ";", 50)
Token(IDENTIFIER, "max_body_size", 51)
Token(INTEGER_LITERAL, "100", 51)
Token(OPERATOR, ";", 51)
Token(OPERATOR, "}", 52)
Token(IDENTIFIER, "location", 54)
Token(STRING_LITERAL, "/directory", 54)
Token(OPERATOR, "{", 54)
Token(IDENTIFIER, "allowed_methods", 55)
Token(STRING_LITERAL, "GET", 55)
Token(OPERATOR, ";", 55)
Token(IDENTIFIER, "root", 56)
Token(STRING_LITERAL, "YoupiBanane/", 56)
Token(OPERATOR, ";", 56)
Token(IDENTIFIER, "index", 57)
Token(STRING_LITERAL, "youpi.bad_extension", 57)
Token(OPERATOR, ";", 57)
Token(IDENTIFIER, "cgi_pass", 58)
Token(STRING_LITERAL, ".bla", 58)
Token(IDENTIFIER, "test_mac/macos_cgi_tester", 58)
Token(OPERATOR, ";", 58)
Token(OPERATOR, "}", 59)
Token(OPERATOR, "}", 60)
Token(IDENTIFIER, "server", 62)
Token(OPERATOR, "{", 62)
Token(IDENTIFIER, "server_names", 63)
Token(STRING_LITERAL, "youpi", 63)
Token(OPERATOR, ";", 63)
Token(IDENTIFIER, "listen", 64)
Token(STRING_LITERAL, "0.0.0.0:8002", 64)
Token(OPERATOR, ";", 64)
Token(IDENTIFIER, "root", 66)
Token(STRING_LITERAL, "./YoupiBanane", 66)
Token(OPERATOR, ";", 66)
Token(IDENTIFIER, "index", 67)
Token(STRING_LITERAL, "index.html", 67)
Token(OPERATOR, ";", 67)
Token(IDENTIFIER, "allowed_methods", 69)
Token(STRING_LITERAL, "GET", 69)
Token(OPERATOR, ";", 69)
Token(IDENTIFIER, "location", 71)
Token(STRING_LITERAL, "/put_test", 71)
Token(OPERATOR, "{", 71)
Token(IDENTIFIER, "allowed_methods", 72)
Token(STRING_LITERAL, "POST", 72)
Token(OPERATOR, ";", 72)
Token(IDENTIFIER, "root", 73)
Token(STRING_LITERAL, "./YoupiBanane/put_here", 73)
Token(OPERATOR, ";", 73)
Token(OPERATOR, "}", 74)
Token(IDENTIFIER, "location", 76)
Token(STRING_LITERAL, "/post_body", 76)
Token(OPERATOR, "{", 76)
Token(IDENTIFIER, "allowed_methods", 77)
Token(STRING_LITERAL, "POST", 77)
Token(OPERATOR, ";", 77)
Token(IDENTIFIER, "max_body_size", 78)
Token(INTEGER_LITERAL, "100", 78)
Token(OPERATOR, ";", 78)
Token(OPERATOR, "}", 79)
Token(IDENTIFIER, "location", 81)
Token(STRING_LITERAL, "/directory", 81)
Token(OPERATOR, "{", 81)
Token(IDENTIFIER, "allowed_methods", 82)
Token(STRING_LITERAL, "GET", 82)
Token(IDENTIFIER, "POST", 82)
Token(OPERATOR, ";", 82)
Token(IDENTIFIER, "root", 83)
Token(STRING_LITERAL, "YoupiBanane/", 83)
Token(OPERATOR, ";", 83)
Token(IDENTIFIER, "index", 84)
Token(STRING_LITERAL, "youpi.bad_extension", 84)
Token(OPERATOR, ";", 84)
Token(IDENTIFIER, "cgi_pass", 85)
Token(STRING_LITERAL, ".bla", 85)
Token(IDENTIFIER, "test_mac/macos_cgi_tester", 85)
Token(OPERATOR, ";", 85)
Token(OPERATOR, "}", 86)
Token(OPERATOR, "}", 87)
Server block found
Location block found
Location block found
Location block found
Location block found
Empty server.
Server block found
Location block found
Location block found
Location block found
Empty server.
Server block found
Location block found
Location block found
Location block found
Empty server.
--------------------------------
              SERVER 
--------------------------------
Host: 0
Port: 8000
Server Names: youpi pepe.com www.fulano.com 

-----LOCATIONS-----
--------------------------------
--Location Key: /directory
  Key Value: /directory
  Root: YoupiBanane
  Max Body Size: 0
  Auto Index: false
  Index: youpi.bad_extension
  CGI Pass: ubuntu_cgi_tester
  CGI Extension: .bla
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: GET
--------------------------------
--Location Key: /pepe
  Key Value: /pepe
  Root: YoupiBanane
  Max Body Size: 0
  Auto Index: false
  Index: 
  CGI Pass: 
  CGI Extension: 
  Redirect: https://example.com
  Error Pages:
  Allowed Methods:
  Method: GET
--------------------------------
--Location Key: /post_body
  Key Value: /post_body
  Root: 
  Max Body Size: 100
  Auto Index: false
  Index: 
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: POST
--------------------------------
--Location Key: /put_test
  Key Value: /put_test
  Root: ./YoupiBanane/put_here
  Max Body Size: 0
  Auto Index: false
  Index: 
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: DELETE
--------------------------------
--Location Key: default
  Key Value: default
  Root: ./YoupiBanane
  Max Body Size: 0
  Auto Index: false
  Index: index.html
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: GET
--------------------------------
--------------------------------
              SERVER 
--------------------------------
Host: 0
Port: 8001
Server Names: youpi 

-----LOCATIONS-----
--------------------------------
--Location Key: /directory
  Key Value: /directory
  Root: YoupiBanane
  Max Body Size: 0
  Auto Index: false
  Index: youpi.bad_extension
  CGI Pass: test_mac/macos_cgi_tester
  CGI Extension: .bla
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: GET
--------------------------------
--Location Key: /post_body
  Key Value: /post_body
  Root: 
  Max Body Size: 100
  Auto Index: false
  Index: 
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: POST
--------------------------------
--Location Key: /put_test
  Key Value: /put_test
  Root: ./YoupiBanane/put_here
  Max Body Size: 0
  Auto Index: false
  Index: 
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: POST
--------------------------------
--Location Key: default
  Key Value: default
  Root: ./YoupiBanane
  Max Body Size: 0
  Auto Index: false
  Index: index.html
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: GET
--------------------------------
--------------------------------
              SERVER 
--------------------------------
Host: 0
Port: 8002
Server Names: youpi 

-----LOCATIONS-----
--------------------------------
--Location Key: /directory
  Key Value: /directory
  Root: YoupiBanane
  Max Body Size: 0
  Auto Index: false
  Index: youpi.bad_extension
  CGI Pass: test_mac/macos_cgi_tester
  CGI Extension: .bla
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: GET
  Method: POST
--------------------------------
--Location Key: /post_body
  Key Value: /post_body
  Root: 
  Max Body Size: 100
  Auto Index: false
  Index: 
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: POST
--------------------------------
--Location Key: /put_test
  Key Value: /put_test
  Root: ./YoupiBanane/put_here
  Max Body Size: 0
  Auto Index: false
  Index: 
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: POST
--------------------------------
--Location Key: default
  Key Value: default
  Root: ./YoupiBanane
  Max Body Size: 0
  Auto Index: false
  Index: index.html
  CGI Pass: 
  CGI Extension: 
  Redirect: 
  Error Pages:
  Allowed Methods:
  Method: GET
--------------------------------
socket on port 8000 ready
socket on port 8001 ready
socket on port 8002 ready

Recibimos conexion socket: 6
INTENTAMOS leer 
parseando linea request

---Request---
GET /directory/youpi.bla HTTP/1.1
Host: localhost:8000
User-Agent: curl/7.81.0
Accept: */*

---
Uri: /directory/youpi.bla

---Response---
Status: 200 OK
Content-Type: text/html; charset=utf-8

Status: 200 OK
Content-Type: text/html; charset=utf-8

---
Cerramos el socket: 6
